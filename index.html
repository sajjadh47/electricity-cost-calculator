<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Electricity Bill Calculator</title>
	<!-- Bootstrap CSS -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<style>.breakdown-item{margin-bottom:5px;padding:5px;border:1px solid #ccc;border-radius:5px}.breakdown-item .price,.breakdown-item .tier{font-weight:700}</style>
</head>
<body>
	<div class="container mt-5">
	  	<h2 class="mb-4 text-center">Electricity Bill Calculator</h2>
	  	<form id="electricityForm">
			<div class="form-row">
		  		<div class="col-md-6">
					<div class="form-group">
			  			<label for="previousReading">Previous Meter Reading:</label>
			  			<input type="number" class="form-control" id="previousReading" placeholder="Enter previous reading">
					</div>
		  		</div>
		  		<div class="col-md-6">
					<div class="form-group">
			  			<label for="currentReading">Current Meter Reading:</label>
			  			<input type="number" class="form-control" id="currentReading" placeholder="Enter current reading">
					</div>
		  		</div>
			</div>
			<div class="form-group">
		  		<label for="units">Or Enter Units Consumed:</label>
		  		<input type="number" class="form-control" id="units" placeholder="Enter units">
			</div>
			<button type="submit" class="btn btn-primary">Calculate Bill</button>
	  	</form>
	  	<div id="result" class="mt-3"></div>
	</div>
	<!-- Bootstrap JS and jQuery (for Bootstrap) -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script>
	function calculateBill(t) {
		let i = 0, e = [];
		if (t <= 75) {
			i = 5.26 * t;
			e.push({ tier: "0-75", price: 5.26, units: t, totalPrice: i });
		} else if (t <= 200) {
			e.push({ tier: "0-75", price: 5.26, units: 75, totalPrice: 394.5 });
			i = 394.5 + (t - 75) * 7.2;
			e.push({ tier: "76-200", price: 7.2, units: t - 75, totalPrice: (t - 75) * 7.2 });
		}
		// Add more conditions for other tiers

		// Fixed demand charge
		const demandCharge = 100;
		i += demandCharge;

		// Calculate VAT
		const vat = 0.05 * i;

		return { bill: i + vat, breakdown: e };
	}

	$("#electricityForm").submit(function(t) {
		t.preventDefault();
		let i = parseFloat($("#previousReading").val());
		let e = parseFloat($("#currentReading").val());
		let r;
		r = isNaN(i) || isNaN(e) ? parseFloat($("#units").val()) : e - i;
		let { bill: s, breakdown: c } = calculateBill(r), p = '<div class="breakdown">';
		c.forEach(t => { p += `<div class="breakdown-item"><span class="tier">${t.tier}:</span> ${t.units} units at <span class="price">৳${t.price.toFixed(2)}</span> per unit (Total: <span class="price">৳${t.totalPrice.toFixed(2)}</span>)</div>` }), p += "</div>", $("#result").html(`<p>Your electricity bill for total units <b>${r}</b> is approximately <span class="price"><b>৳${s.toFixed(2)}</b></span></p><p><b>Note: Demand Charge & 5% VAT on total will be added extra in your final bill by the govt.</b></><p>Breakdown:</p>${p}`);
	});
	</script>
</body>
</html>
